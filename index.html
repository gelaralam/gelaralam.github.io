<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasepuhan Gelaralam | Melestarikan Budaya, Menjaga Harmoni Alam</title>
    <meta name="description"
        content="Website Resmi Kasepuhan Gelaralam, masyarakat adat Sunda di Sukabumi. Jelajahi sejarah, upacara adat, dan tradisi leluhur yang masih lestari hingga kini.">
    <meta name="keywords"
        content="Kasepuhan Gelaralam, kampung adat, wisata budaya Sukabumi, tradisi Sunda, upacara adat, Jawa Barat, masyarakat adat, Ciptagelar">
    <meta name="author" content="Kasepuhan Gelaralam">

    <!-- Open Graph / Facebook / WhatsApp -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gelaralam.github.io/">
    <meta property="og:title" content="Kasepuhan Gelaralam | Melestarikan Budaya, Menjaga Harmoni Alam">
    <meta property="og:description"
        content="Website Resmi Kasepuhan Gelaralam, masyarakat adat Sunda di Sukabumi. Jelajahi sejarah, upacara adat, dan tradisi leluhur.">
    <meta property="og:image" content="https://gelaralam.github.io/assets/og-image.jpg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kasepuhan Gelaralam | Melestarikan Budaya, Menjaga Harmoni Alam">
    <meta name="twitter:description"
        content="Website Resmi Kasepuhan Gelaralam, masyarakat adat Sunda di Sukabumi. Jelajahi sejarah, upacara adat, dan tradisi leluhur.">
    <meta name="twitter:image" content="https://gelaralam.github.io/assets/og-image.jpg">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Custom styles are in css/style.css -->
</head>

<body>
    <!-- Header & Navigation -->
    <header class="header">
        <nav class="nav">
            <div class="container nav__container">
                <a href="#" class="nav__brand">
                    <img src="assets/logo.png" alt="Logo Kasepuhan">
                    <span>KASEPUHAN GELARALAM</span>
                </a>
                <button class="nav__toggle" id="nav-toggle">
                    <span></span><span></span><span></span>
                </button>
                <ul class="nav__menu" id="nav-menu">
                    <li><a href="#beranda" class="nav__link active">Beranda</a></li>
                    <li><a href="#sejarah" class="nav__link">Tentang Kami</a></li>
                    <li><a href="#budaya" class="nav__link">Upacara Adat</a></li>
                    <li><a href="#jadwal" class="nav__link">Jadwal</a></li>
                    <li><a href="#galeri" class="nav__link">Galeri</a></li>
                    <li><a href="#blog" class="nav__link">Blog</a></li>
                    <li><a href="#kontak" class="nav__link">Testimoni</a></li>
                    <li class="nav__lang">
                        <a href="javascript:void(0)" class="lang-btn active" id="lang-id"
                            onclick="translateTo('id')">ID</a>
                        <span class="lang-separator">|</span>
                        <a href="javascript:void(0)" class="lang-btn" id="lang-en" onclick="translateTo('en')">EN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="beranda">
        <div class="container hero__container">
            <!-- Content -->
            <div class="hero__content">
                <img src="assets/logo.png" alt="Logo Kasepuhan" class="hero__logo">
                <span class="hero__subtitle">KASEPUHAN</span>
                <h1 class="hero__title">GELARALAM</h1>
                <p class="hero__description">
                    Kasepuhan Gelaralam adalah salah satu masyarakat adat yang ada di Jawa Barat. Hingga hari ini
                    Kasepuhan Gelaralam erat hubungannya dengan padi, segala aktivitas masyarakatnya berpusat pada
                    sistem pertanian padi. Di tempat tersebut kita masih bisa menyaksikan secara langsung bagaimana cara
                    hidup Masyarakat Sunda lama. Semua hal yang berhubungan dengan padi diolah menggunakan alat-alat
                    tradisional. Dalam konteks ini, masyarakat Kasepuhan Gelaralam memiliki pepatah Ciri sabumi Cara
                    Sadesa, Sacarana-sacarana, yang berarti setiap daerah memiliki cara atau adat istiadatnya
                    masing-masing, dan tentu berbeda-beda.
                    <br><br>
                    Masyarakat Adat Kasepuhan Gelaralam masih menggunakan aturan-aturan adat secara turun-termurun dari
                    leluhurnya. Kapamalian atau pantrangan di kampung adat ini masih sangat diterapkan. Bahkan, jika
                    kita melanggar hal yang tidak diperbolehkan, maka kita akan sakit atau terhindar dari keselamatan
                    yang biasa disebut oleh masyarakat kasepuhan sebagai Kabendon.
                    <br><br>
                    Masyarakat kasepuhan dilarang menjual belikan beras dan nasi, menggunakan kendaraan untuk membawa
                    padi, dan mengolah lahan pertanian dengan barang-barang seperti traktor, penggiling padi, mejikom,
                    dll. Semua dilakukan manual dan secara tradisional. Hal tersebut hanya beberapa aturan-aturan adat
                    yang ada di Kasepuhan Gelaralam. Guna untuk tetap menjaga kelestarian adat dan tradisi leluhurnya.
                </p>
                <div class="hero__identity-labels">
                    <div class="hero__identity-text">
                        <h4 class="hero__portrait-name">ABAH UGI SUGRIANA RAKASIWI</h4>
                        <p class="hero__portrait-title">HEAD OF KASEPUHAN GELARALAM</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sejarah Section -->
    <section class="sejarah" id="sejarah">
        <div class="container sejarah__container">
            <h3 class="section__subtitle-alt">TENTANG KAMI</h3>
            <h2 class="section__title-large">SEJARAH</h2>

            <div class="sejarah__content">
                <p class="sejarah__text">
                    Dalam tradisi Kasepuhan Gelaralam dikenal istilah ngalalakon (perpindahan) dan wangsit (petunjuk)
                    yang hanya dimiliki oleh Abah sebagai Ketua Adat. Dalam catatan lokal Masyarakat, Kasepuhan
                    Gelaralam telah melakukan 20 kali perpindahan berdasarkan wangsit/petunjuk ketua adat. Adapun ciri
                    pasti yang mereka terapkan adalah ketika tanah sudah mulai tidak bisa ditanami atau padi yang kurang
                    ketika masa panen, maka kemungkinan mereka akan melakukan perpindahan ke suatu tempat yang dinamakan
                    Awisan. Awisan berarti tempat yang dijanjikan oleh leluhur Pancer Pangawinan untuk dijadikan tempat
                    atau kampung baru, biasanya terdapat ciri pada tiap awisan, sehingga Masyarakat Pancer Pangawinan
                    dapat membedakan antara Awisan dan Tarikolot.
                    <br><br>
                    Kasepuhan Gelaralam adalah pergantian nama dari Kasepuhan Ciptagelar. Kasepuhan ini berdiri sejak
                    tahun 1368 hingga sekarang. Kasepuhan Gelaralam merupakan pecahan dari Masyarakat Pancer Pangawinan
                    yang mengawali sejarahnya dari Kampung Tarikolot Cipatat Bogor yang terbagi menjadi tiga Kasepuhan
                    di sekitar Banten dan Sukabumi meliputi: Kasepuhan Citorek, Kasepuhan Cicarucub, dan Kasepuhan
                    Gelaralam. Ketiga Masyarakat Pancer Pangawinan tersebut mempunyai satu Tradisi yang sama yaitu
                    Tradisi menjaga Tali Paranti Karuhun yang masih diterapkan hingga hari ini, Kasepuhan Gelaralam
                    adalah satu-satunya Kasepuhan yang memiliki konsep Nomaden atau berpindah-pindah, sedangkan sisanya
                    berdiam di dua tempat berbeda di wilayah Kabupaten Banten sekarang. Hal ini, yang menjadi pembeda
                    Kasepuhan Gelaralam dan kasepuhan lainnya.
                    <br><br>
                    Pancer Pangawinan adalah kelompok komunitas yang telah ada dari tahun 1300 M, ditandai dengan adanya
                    Kampung Tarikolot Cipatat Urug di Bogor. Ciri masyarakat pancer pangawinan adalah budidaya padi
                    ladang (huma). Selain itu, kebiasaan komunitas pancer pangawinan adalah berpindah-pindah, dengan
                    adanya foklor atau cerita rakyat mengenai batara tujuh. Secara epistimologi kata Pancer berarti
                    pusat, kata Pangawinan berarti tempat berkawin. Pancer Pangawinan berarti tempat penyelarasan dua
                    unsur dalam kosmologi Sunda seperti, laki-laki dan perempuan, langit dan bumi, matahari dan bulan,
                    dll.
                </p>
            </div>


        </div>
    </section>

    <!-- Upacara Adat Section -->
    <section class="ngaseuk" id="budaya">
        <div class="ngaseuk__bg" id="budaya-bg"></div>
        <button class="ngaseuk__nav ngaseuk__nav--prev" id="budaya-prev" aria-label="Previous slide">&lsaquo;</button>
        <button class="ngaseuk__nav ngaseuk__nav--next" id="budaya-next" aria-label="Next slide">&rsaquo;</button>
        <div class="container ngaseuk__container">
            <div class="ngaseuk__slider" id="budaya-slider">
                <!-- Populated by JS -->
            </div>
            <div class="ngaseuk__indicators" id="budaya-indicators">
                <!-- Populated by JS -->
            </div>

    </section>

    <!-- Timeline/Jadwal -->
    <section class="timeline" id="jadwal">
        <div class="container timeline__container-wrapper">
            <h3 class="timeline__section-subtitle">KASEPUHAN GELARALAM</h3>
            <h2 class="timeline__section-title">JADWAL ACARA KEGIATAN ADAT 2026</h2>
            <div id="timeline-container" class="timeline__container"></div>
        </div>
    </section>


    <!-- Gallery -->
    <section class="gallery" id="galeri">
        <div class="container">
            <h2 class="section__title">GALERI</h2>
            <div class="gallery__filters">
                <button class="filter-btn active" data-filter="all">SEMUA</button>
                <button class="filter-btn" data-filter="adat">UPACARA ADAT</button>
                <button class="filter-btn" data-filter="life">KEHIDUPAN</button>
                <button class="filter-btn" data-filter="craft">KERAJINAN</button>
            </div>
            <div class="gallery__grid" id="gallery-grid"></div>
        </div>
    </section>

    <!-- Blog Section -->
    <section class="blog" id="blog">
        <div class="container">
            <h3 class="section__subtitle-alt">BERITA & KEGIATAN</h3>
            <h2 class="section__title">BLOG</h2>
            <div class="blog__grid" id="blog-grid">
                <!-- Populated by JS -->
            </div>
            <div class="blog__action" style="text-align: center; margin-top: 2rem;">
                <a href="https://www.instagram.com/kasepuhangelaralamofficial/" target="_blank" class="btn-primary"
                    style="background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: #fff; padding: 12px 30px; border-radius: 30px; font-weight: 700; letter-spacing: 1px; transition: 0.3s; box-shadow: 0 5px 15px rgba(220, 39, 67, 0.3); text-decoration: none; display: inline-flex; align-items: center; gap: 10px;">
                    <i class="fa-brands fa-instagram"></i> IKUTI KAMI DI INSTAGRAM
                </a>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials" id="kontak">
        <div class="container">
            <h2 class="section__title">TESTIMONI</h2>

            <div class="testimonials__grid" id="testimonials-grid">
                <!-- Populated by JS -->
            </div>

            <div class="testimonials__action" style="text-align: center; margin-top: 3rem;">
                <button class="btn-primary" id="write-testimoni-btn"
                    style="background: var(--color-accent); color: #000; padding: 12px 30px; border-radius: 30px; font-weight: 700; letter-spacing: 1px; transition: 0.3s; box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);">
                    <i class="fa-solid fa-pen-nib" style="margin-right: 8px;"></i> TULIS PENGALAMAN ANDA
                </button>
            </div>
        </div>
    </section>

    <!-- Public Testimonial Modal -->
    <div class="modal" id="public-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-public-modal">&times;</span>
            <h2 class="section__title" style="font-size: 2rem; margin-bottom: 1rem; text-align: center;">Ceritakan
                Pengalamanmu</h2>
            <p style="text-align: center; margin-bottom: 2rem; color: #666;">Bagikan cerita seru Anda saat berkunjung ke
                Kasepuhan Gelaralam.</p>

            <form id="public-form">
                <div class="form-group">
                    <label for="p-name">Nama Lengkap</label>
                    <input type="text" id="p-name" required placeholder="Nama Anda">
                </div>
                <div class="form-group">
                    <label for="p-origin">Asal Kota</label>
                    <input type="text" id="p-origin" required placeholder="Kota Asal">
                </div>
                <div class="form-group">
                    <label for="p-photo">Foto Anda (Opsional)</label>
                    <div style="font-size: 0.8rem; color: #666; margin-bottom: 5px;">*Pilih foto, lalu lampirkan
                        (attach) ke email nanti</div>
                    <input type="file" id="p-photo" accept="image/*">
                    <div id="upload-status" style="margin-top: 8px; font-size: 0.85rem; display: none;"></div>
                </div>
                <div class="form-group">
                    <label for="p-text">Cerita Anda</label>
                    <textarea id="p-text" rows="4" required
                        placeholder="Tuliskan pengalaman Anda di sini..."></textarea>
                </div>
                <button type="submit" class="btn-primary"
                    style="width: 100%; background: var(--color-accent); color: #000; padding: 12px; font-weight: 700; border-radius: 6px; margin-top: 1rem;">KIRIM
                    CERITA</button>
                <p style="font-size: 0.8rem; color: #888; text-align: center; margin-top: 10px;">*Cerita Anda akan
                    dikirim melalui email ke admin untuk dimoderasi sebelum ditampilkan.</p>
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="container footer__container">
            <div class="footer__brand">
                <img src="assets/logo.png" alt="Logo Kasepuhan" class="footer__logo" loading="lazy" decoding="async">
            </div>

            <div class="footer__subscribe">
                <h4>Subscribe to Kasepuhan Gelaralam via Email</h4>
                <p style="margin-bottom: 1rem;">Latest news, musings, announcements and updates direct to your inbox.
                </p>
                <form class="subscribe-form">
                    <input type="email" placeholder="Email Address" required>
                    <button type="submit">Subscribe</button>
                </form>
                <div class="footer__contact-info"
                    style="margin-top: 1.5rem; display: flex; align-items: center; gap: 10px; color: var(--color-text-light); font-weight: 500;">
                    <span style="font-weight: 400; opacity: 0.8; font-size: 0.95rem;">Hubungi Kami:</span>
                    <i class="fa-solid fa-phone" style="color: var(--color-accent);"></i>
                    <a href="tel:+6281222410859"
                        style="text-decoration: none; color: inherit; transition: color 0.3s ease;">+62
                        812-2241-0859</a>
                </div>
            </div>

            <div class="footer__sitemap">
                <h4 class="footer__title">SITEMAP</h4>
                <ul class="footer__links">
                    <li><a href="#beranda">Beranda</a></li>
                    <li><a href="#sejarah">Tentang Kami</a></li>
                    <li><a href="#budaya">Upacara Adat</a></li>
                    <li><a href="#jadwal">Jadwal Adat</a></li>
                    <li><a href="#galeri">Galeri</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#kontak">Testimoni</a></li>
                </ul>
            </div>

            <div class="footer__socials-box">
                <h4 class="footer__title">SOSIAL</h4>
                <div class="footer__socials">
                    <a href="https://www.instagram.com/kasepuhangelaralamofficial/" target="_blank"
                        rel="noopener noreferrer" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.youtube.com/@Kasepuhan_Gelaralam" target="_blank" rel="noopener noreferrer"
                        aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
                    <a href="#" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="mailto:info@gelaralam.id" aria-label="Email"><i class="fa-solid fa-envelope"></i></a>
                    <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                </div>

                <div class="footer__location" style="margin-top: 2.5rem;">
                    <h4 class="footer__title">LOKASI</h4>
                    <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-bottom: 15px; line-height: 1.6;">
                        KASEPUHAN GELARALAM<br>
                        Desa Sirnaresmi Kec.Cisolok Kab.Sukabumi
                    </p>
                    <a href="https://url-shortener.me/9BIY" target="_blank" class="footer__map-link"
                        style="color: var(--color-accent); font-size: 0.9rem; transition: 0.3s; text-decoration: none; display: flex; align-items: center; gap: 8px;">
                        <i class="fa-solid fa-map-location-dot"></i> Lihat Peta
                    </a>
                </div>
            </div>
        </div>
        <div class="footer__bottom">
            <div class="container">
                <p>&copy; 2026 Kasepuhan Gelaralam. All Rights Reserved. | <a href="admin.html"
                        style="opacity: 0.5; font-size: 0.8rem;">Admin Login</a></p>
            </div>
        </div>
    </footer>

    <script src="js/blog-data.js"></script>
    <script src="js/budaya-data.js"></script>
    <script src="js/timeline-data.js"></script>
    <script src="js/gallery-data.js"></script>
    <script src="js/testimonial-data.js"></script>
    <!-- SCRIPT UTAMA -->
    <script>
        // LOGIC
        document.addEventListener('DOMContentLoaded', () => {
            // Navbar
            document.getElementById('nav-toggle').onclick = () => document.getElementById('nav-menu').classList.toggle('active');

            // Sejarah Dots
            document.querySelectorAll('.sejarah__dot').forEach(dot => {
                dot.onclick = function () {
                    const idx = this.dataset.slide;
                    document.querySelectorAll('.sejarah__dot').forEach(d => d.classList.remove('active'));
                    document.querySelectorAll('.sejarah__slide').forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                    document.querySelectorAll('.sejarah__slide')[idx].classList.add('active');
                }
            });

            // Budaya Slider
            const slider = document.getElementById('budaya-slider');
            const section = document.querySelector('.ngaseuk');
            let curBudaya = 0;

            const indicatorContainer = document.getElementById('budaya-indicators');

            const renderBudaya = () => {
                slider.innerHTML = '';
                if (indicatorContainer) indicatorContainer.innerHTML = '';

                budayaData.forEach((item, i) => {
                    const div = document.createElement('div');
                    div.className = `ngaseuk__slide ${i === curBudaya ? 'active' : ''}`;
                    div.innerHTML = `
                        <div class="ngaseuk__number">0${i + 1}</div>
                        <h3 class="ngaseuk__label">UPACARA ADAT</h3>
                        <h2 class="ngaseuk__title">${item.title}</h2>
                        <div class="ngaseuk__divider-glow"></div>
                        <p class="ngaseuk__description">${item.d}</p>
                    `;
                    slider.appendChild(div);

                    if (indicatorContainer) {
                        const dot = document.createElement('div');
                        dot.className = `ngaseuk__dot ${i === curBudaya ? 'active' : ''}`;
                        dot.onclick = () => { curBudaya = i; renderBudaya(); };
                        indicatorContainer.appendChild(dot);
                    }
                });

                // Set background with transition effect
                const bgDiv = document.getElementById('budaya-bg');
                bgDiv.style.backgroundImage = `url('${budayaData[curBudaya].b}')`;
            };

            document.getElementById('budaya-prev').onclick = () => { curBudaya = (curBudaya - 1 + budayaData.length) % budayaData.length; renderBudaya(); };
            document.getElementById('budaya-next').onclick = () => { curBudaya = (curBudaya + 1) % budayaData.length; renderBudaya(); };
            renderBudaya();

            // Timeline
            const tl = document.getElementById('timeline-container');
            timelineData.forEach(item => {
                const div = document.createElement('div');
                div.className = 'timeline__item';
                div.innerHTML = `
                    <div class="timeline__content">
                        <h3 class="timeline__title" style="font-family: 'Times New Roman', serif; font-weight: 400;">${item.title}</h3>
                        <p class="timeline__description" style="margin-bottom: 15px; color: #666;">${item.description}</p>
                        <div class="timeline__date" style="display: inline-block;">${item.date}</div>
                    </div>
                `;
                tl.appendChild(div);
            });

            // Gallery
            const grid = document.getElementById('gallery-grid');
            const filterBtns = document.querySelectorAll('.filter-btn');

            const renderGallery = (filter = 'all') => {
                grid.innerHTML = '';
                const items = filter === 'all' ? galleryItems : galleryItems.filter(i => i.cat === filter);
                items.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'gallery__item';
                    div.innerHTML = `<img src="${item.img}" alt="${item.title}" loading="lazy" decoding="async"><div class="gallery__item-overlay"><h3>${item.title}</h3></div>`;
                    grid.appendChild(div);
                });
            };

            filterBtns.forEach(btn => {
                btn.onclick = function () {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    renderGallery(this.dataset.filter);
                };
            });

            renderGallery();

            // Blog
            const blogGrid = document.getElementById('blog-grid');
            const renderBlog = () => {
                blogGrid.innerHTML = '';

                const monthMap = {
                    'Januari': 0, 'Februari': 1, 'Maret': 2, 'April': 3, 'Mei': 4, 'Juni': 5,
                    'Juli': 6, 'Agustus': 7, 'September': 8, 'Oktober': 9, 'November': 10, 'Desember': 11
                };

                const sortedData = [...blogData].sort((a, b) => {
                    const dateA = new Date(a.year, monthMap[a.month] || 0, a.day);
                    const dateB = new Date(b.year, monthMap[b.month] || 0, b.day);
                    return dateB - dateA;
                });

                sortedData.forEach(item => {
                    const card = document.createElement('article');
                    card.className = 'blog__card';
                    card.style.cursor = 'pointer';
                    card.onclick = () => window.location.href = `blog-detail.html?id=${item.id}`;
                    card.innerHTML = `
                        <div class="blog__image">
                            <img src="${item.image || 'assets/logo.png'}" alt="${item.title}" loading="lazy" decoding="async" onerror="this.src='assets/logo.png'">
                            <div class="blog__date">
                                <span class="blog__day">${item.day}</span>
                                <span class="blog__month">${item.month}</span>
                                <span class="blog__year">${item.year}</span>
                            </div>
                        </div>
                        <div class="blog__content">
                            <span style="color: var(--color-accent); font-weight: 700; font-size: 0.75rem; letter-spacing: 1px; margin-bottom: 10px; display: block;">${item.category || 'BERITA'}</span>
                            <h3 class="blog__title">${item.title}</h3>
                            <p class="blog__description">${item.description}</p>
                            <span class="read-more" style="color: var(--color-primary); font-weight: 600; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; margin-top: 15px;">
                                Baca Selengkapnya <i class="fa-solid fa-arrow-right"></i>
                            </span>
                        </div>
                    `;
                    blogGrid.appendChild(card);
                });
            };

            renderBlog();

            // Testimonials
            const testimonialGrid = document.getElementById('testimonials-grid');
            const renderTestimonials = () => {
                testimonialGrid.innerHTML = '';
                testimonialData.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'testimonial__card';

                    let starsHtml = '';
                    for (let i = 0; i < item.stars; i++) {
                        starsHtml += '<i class="fa-solid fa-star"></i>';
                    }

                    card.innerHTML = `
                        <div class="testimonial__stars">${starsHtml}</div>
                        <p class="testimonial__text">"${item.content || item.text || ''}"</p>
                        <div class="testimonial__author">
                            <img src="${item.photo}" alt="${item.name}" class="testimonial__photo" loading="lazy" decoding="async">
                            <div class="testimonial__details">
                                <h4 class="testimonial__name">${item.name}</h4>
                                <span class="testimonial__origin">${item.origin}</span>
                            </div>
                        </div>
                    `;
                    testimonialGrid.appendChild(card);
                });
            };

            renderTestimonials();

            // Public Modal Logic
            const pModal = document.getElementById('public-modal');
            const pBtn = document.getElementById('write-testimoni-btn');
            const pClose = document.getElementById('close-public-modal');
            const pForm = document.getElementById('public-form');
            const photoInput = document.getElementById('p-photo');
            const uploadStatus = document.getElementById('upload-status');

            pBtn.onclick = () => pModal.classList.add('active');
            pClose.onclick = () => pModal.classList.remove('active');
            window.onclick = (e) => {
                if (e.target == pModal) pModal.classList.remove('active');
            }

            // Show info when photo selected
            photoInput.onchange = function () {
                const file = this.files[0];
                if (file) {
                    uploadStatus.style.display = 'block';
                    uploadStatus.style.color = '#2563eb';
                    uploadStatus.innerHTML = '<i class="fa-solid fa-info-circle"></i> Foto siap. Jangan lupa attach saat email terbuka!';
                } else {
                    uploadStatus.style.display = 'none';
                }
            };

            pForm.onsubmit = async (e) => {
                e.preventDefault();
                const name = document.getElementById('p-name').value;
                const origin = document.getElementById('p-origin').value;
                const text = document.getElementById('p-text').value;

                const submitBtn = pForm.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.innerText;
                submitBtn.disabled = true;
                submitBtn.innerText = 'MENGIRIM...';

                try {
                    const response = await fetch('https://data.gelaralam.id/api/testimonial/public', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            name: name,
                            origin: origin,
                            content: text,
                            photo: 'assets/testimonials/default.jpg' // Default photo for public submissions
                        }),
                    });

                    if (response.ok) {
                        alert('Terima kasih! Cerita Anda telah terkirim dan akan ditinjau oleh tim kami sebelum ditampilkan.');
                        pModal.classList.remove('active');
                        pForm.reset();
                        uploadStatus.style.display = 'none';
                    } else {
                        throw new Error('Gagal mengirim testimoni');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    let errorMessage = 'Maaf, terjadi kesalahan saat mengirim cerita.';
                    if (error.message) {
                        errorMessage += '\nDetail: ' + error.message;
                    }
                    alert(errorMessage + '\n\nSilakan cek koneksi internet Anda atau hubungi admin jika masalah berlanjut.');
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.innerText = originalBtnText;
                }
            };
        });
    </script>

    <!-- Google Translate Script -->
    <div id="google_translate_element" style="display: none;"></div>
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'id', includedLanguages: 'en,id', autoDisplay: false }, 'google_translate_element');
        }

        function translateTo(lang) {
            // Update UI
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang-' + lang).classList.add('active');

            // Trigger Google Translate
            const select = document.querySelector('.goog-te-combo');
            if (select) {
                select.value = lang;
                select.dispatchEvent(new Event('change'));
            } else {
                // If widget not loaded yet, set cookie
                document.cookie = `googtrans=/id/${lang}`;
                location.reload();
            }
        }

        // Check current language on load
        document.addEventListener('DOMContentLoaded', () => {
            const cookie = document.cookie.split('; ').find(row => row.startsWith('googtrans='));
            if (cookie) {
                const lang = cookie.split('/').pop();
                if (lang === 'en') {
                    document.getElementById('lang-id').classList.remove('active');
                    document.getElementById('lang-en').classList.add('active');
                }
            }
        });
    </script>
    <script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>

</html>